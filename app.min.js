// 图片懒加载
function initLazyLoad() {
    const images = document.querySelectorAll("img[data-src]");
    const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                img.src = img.dataset.src;
                img.removeAttribute("data-src");
                observer.unobserve(img);
            }
        });
    });
    images.forEach(img => imageObserver.observe(img));
}

// 显示模态框
function showModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.style.display = "block";
        document.body.classList.add("modal-open");
        setTimeout(() => modal.classList.add("show"), 10);
    }
}

// 关闭通知
function closeNotice() {
    const notice = document.getElementById('siteNotice');
    if (notice) {
        notice.style.display = 'none';
        document.body.style.overflow = '';
    }
}

// 初始化通知弹窗
function initNotice() {
    const notice = document.getElementById('siteNotice');
    if (notice) {
        notice.style.display = 'flex';
        document.body.style.overflow = 'hidden';
        
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeNotice();
            }
        });
        
        notice.addEventListener('click', function(e) {
            if (e.target === notice) {
                closeNotice();
            }
        });
    }
}

// 页面加载完成后初始化
document.addEventListener('DOMContentLoaded', function() {
    initLazyLoad();
    initNotice();
}); 